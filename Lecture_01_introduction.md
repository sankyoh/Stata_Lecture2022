# Stataとは何か？　そして、何でないか？
* 統計解析に関する統合環境である（Integrated Development Environment）  
* 解析を行うだけではなく、データマネジメントやプロジェクトマネジメントが行える。
* 統計解析ソフトではない。
* 統計解析を行うだけのソフトではない。
* 統計教本である。
* 詳細なマニュアルが揃っている。
* これらを読むだけで、かなりの力量がつく（と思う）。
* 表計算ではない。

# Stataの特徴
## コマンドが豊富にある
必ずしも、自分のやりたい公式コマンドが揃うわけではないが、user-driven commandを探せばだいたい見つかります。  
```
// コマンドウィンドウでの探し方
findit keyword
serch keyword
```
それでも見つからないときは、ネットで検索する。最初に検索するべきなのは、[Statalist](https://statalist.org/)。

また、Stata社の統計家の方針によって公式コマンドが決まります。

gllammというコマンドは、元はuse-driven commandだったが、ver14では公式コマンドに採用されました。公式コマンドmeglmも同様の機能がある。

一方で、[psmatch2](http://repec.org/bocode/p/psmatch2.html)というコマンドは、かつては広く使われたuse-driven commandだったが、不採用であり、Stata13で公式コマンド（teffects）が作られた（ATEの標準誤差の計算で意見の不一致）。

## インストールが手軽
RやPythonと異なって、インストールするときに手間がほとんどかかりません。

また、高速化についても自分自身で何か行なう必要なありません（高価なバージョンを用意する）。

## 世界第3位の商用統計解析ソフト


# この講義シリーズの目的
プログラミングをキチンと行うことを目的としています。

一口にStataプログラミングといっても幾つかのレベルがあります。

* do-file
* programコマンド
* ado-file
* Mata
* Python

## do-fileを使ったprograming
最初の段階として、do-fileを使って解析を進めることが必要です。マウスクリックだけでの解析作業であったり、Stataのコマンドウィンドウのみを用いた作業では、下に示す再現性

## programコマンドを用いたprograming


## ado-fileを使ったprogramming

## MataやPythonを使ったprogramming
Stataでは、Stata内部から他の言語を呼び出して使うことができます。その中で古くから用いられているのが[Mata](https://www.stata.com/features/overview/introduction-to-mata/)です。Mataでは、

# なぜプログラミングが必要なのか？
## 作業効率的な必要性
一度、作った統計解析プログラムを残しておく。
似たようなデータ解析を行う際に、プログラムの流用が出来る。
GitHubなどで共有可能（Stataの共有例は少ないが…）
## 倫理的な必要性
### 再現不可能な遺伝学
2006年のデューク大学の抗がん剤の関する臨床試験があり、腫瘍に対して良く効く抗腫瘍薬を特定出来るという研究成果（遺伝子型）でした。この内容に対して、生物統計家：Keith A. BaggerlyとKevin R. Coombesが検証した。

しデューク大学の研究者から提供されたデータセットを調べて見たところ、下記のような問題点がありました。
* データが1つずつズレているところがある。
* 1人の患者が2回データセットに出てくる。
* 効く・効かないのカテゴリが逆になっている患者がいる。
* マイクロアレイ機器ごとに結果に有意なバラツキがあった。（どの機器を使うかによって、結果が異なる）
* 
要は、しっちゃかめっちゃかで、問題しか無かったようです。[参考](http://projecteuclid.org/download/pdfview_1/euclid.aoas/1267453942)

しかし、デューク大学の審査委員会はそれを見つけられず臨床試験は続けられた。

### 必要な対応
データ（可能な限り）や解析用コードを残す。そして、「何か不都合なことを隠しているかも」と疑われないようにする。

## 再現可能な研究
計算機を使用した再現可能な研究のための10個の簡単な規則
http://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1003285
このルールには基本的に従うようにする。
特に、2つのことをできるように
ソースコードを公表すること（必ず）
データセットを公表すること（可能な範囲で）

## 実際のデータのさわり方
Stataの例題データソースを用いる。
使ったコマンド
sysuse <データセット名>
例題データセットを読み込む
log using <ログファイル名>
これ以降の内容をログファイルに保存する。
describe
変数の情報を表示する。
codebook <変数名>
変数の詳しい情報を表示する。
sum <変数名>
変数のデータ数、平均値、標準偏差、最小値、最大値を表示する。
list <変数名> 
変数と値のリストを表示する。
histogram <変数名>
ヒストグラムを作成する。
 
